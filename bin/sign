#!/usr/bin/env ruby

require "bundler/setup"
require "dafiti/signature"
URL = 'https://rocket:rock4me@sellercenter-staging-api.dafiti.cl'

user_id, api_key, * = ARGV

q = Dafiti::Signature.generate_query(
  api_key: api_key,
  user_id: user_id,
  params: {
    'Action' => 'GetProducts',#'GetProducts',
    'Format' => 'JSON',
    'Filter' => 'all',
    # 'Timestamp' => '2015-07-01T11:11:11+00:00'
  }
)
# puts q
# puts (q == '3ceb8ed91049dfc718b0d2d176fb2ed0e5fd74f76c5971f34cdab48412476041')

cmd = %(curl -i "#{URL}?#{q}")
puts cmd
puts ''
puts `#{cmd}`
